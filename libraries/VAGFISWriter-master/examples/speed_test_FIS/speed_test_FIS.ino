#include "VAGFISWriter.h"


#define MinRefresh 100

// FIS
//stm32
//#define FIS_CLK PB3
//#define FIS_DATA PB5
//#define FIS_ENA PA15

//avr
#define FIS_ENA 19
#define FIS_CLK 18
#define FIS_DATA 23

VAGFISWriter fisWriter( FIS_CLK, FIS_DATA, FIS_ENA );

const char PROGMEM b5f_P[704] {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  , 0x1f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x80
  , 0x1f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x80
  , 0x1f, 0xff, 0xf0, 0x00, 0x1f, 0xff, 0xf1, 0x80
  , 0x1f, 0xff, 0xc0, 0x00, 0x07, 0xff, 0x01, 0x80
  , 0x1f, 0xff, 0x80, 0x00, 0x03, 0xf0, 0x01, 0x80
  , 0x1c, 0x0f, 0x80, 0x00, 0x01, 0xe0, 0x01, 0x80
  , 0x1c, 0x0f, 0x00, 0x00, 0x00, 0xe0, 0x01, 0x80
  , 0x1c, 0x0f, 0x00, 0x00, 0x00, 0xe0, 0x07, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0xe0, 0xc7, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0x60, 0x03, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0x60, 0x01, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0x60, 0x01, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0x78, 0x01, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0x7f, 0x81, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0x3f, 0xff, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0x20, 0x03, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0x20, 0x01, 0x80
  , 0x1c, 0x0e, 0x03, 0xff, 0xe0, 0x20, 0x01, 0x80
  , 0x1c, 0x0e, 0x07, 0xff, 0xf0, 0x20, 0x01, 0x80
  , 0x1c, 0x0e, 0x07, 0xff, 0xf0, 0x20, 0x01, 0x80
  , 0x1c, 0x0f, 0x07, 0xff, 0xf0, 0x3f, 0xff, 0x80
  , 0x1c, 0x0f, 0x07, 0xff, 0xe0, 0x3f, 0xf3, 0x80
  , 0x1c, 0x0f, 0x81, 0xf0, 0x00, 0x3f, 0xf1, 0x80
  , 0x1c, 0x00, 0x18, 0xe0, 0x00, 0x3f, 0xf1, 0x80
  , 0x1f, 0xe0, 0xd6, 0xe0, 0x00, 0x60, 0x01, 0x80
  , 0x1f, 0xfc, 0xf8, 0xe0, 0x00, 0x60, 0x01, 0x80
  , 0x1f, 0xfe, 0x78, 0xe0, 0x00, 0x60, 0x01, 0x80
  , 0x1f, 0xff, 0x5e, 0xe0, 0x00, 0x60, 0x01, 0x80
  , 0x1d, 0xff, 0x31, 0xe0, 0x00, 0x60, 0x01, 0x80
  , 0x1c, 0xff, 0x83, 0xe0, 0x00, 0x7f, 0xff, 0x80
  , 0x1c, 0x7f, 0xfe, 0xe0, 0x00, 0xff, 0xff, 0x80
  , 0x1c, 0x1f, 0xff, 0xe0, 0x00, 0xe0, 0x03, 0x80
  , 0x1c, 0x00, 0xff, 0xe0, 0x01, 0xe0, 0x01, 0x80
  , 0x1c, 0x00, 0xff, 0xe0, 0x01, 0xe0, 0x01, 0x80
  , 0x1c, 0x00, 0xff, 0xf0, 0x03, 0xe0, 0x01, 0x80
  , 0x1c, 0x00, 0x7f, 0xf8, 0x07, 0xe0, 0x01, 0x80
  , 0x1c, 0x00, 0x77, 0xfe, 0x0f, 0xff, 0xff, 0x80
  , 0x1f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x80
  , 0x1f, 0xff, 0xff, 0xff, 0xdf, 0xe0, 0x01, 0x80
  , 0x1f, 0xff, 0xff, 0xff, 0xc3, 0xe0, 0x01, 0x80
  , 0x1f, 0xe3, 0x8f, 0x1f, 0xe1, 0xe0, 0x01, 0x80
  , 0x1f, 0xdf, 0x86, 0x0f, 0xe1, 0xe0, 0x01, 0x80
  , 0x1f, 0x8a, 0x66, 0x03, 0xe0, 0xe0, 0x03, 0x80
  , 0x1f, 0x07, 0x06, 0x3f, 0xf1, 0xe0, 0x07, 0x80
  , 0x1e, 0x00, 0x00, 0x7f, 0xff, 0xf8, 0x01, 0x80
  , 0x1e, 0x00, 0x00, 0x27, 0xff, 0xff, 0x41, 0x80
  , 0x1e, 0x00, 0x03, 0x21, 0xfc, 0x75, 0x41, 0x80
  , 0x1c, 0x00, 0x00, 0xf0, 0x78, 0x65, 0xb3, 0x80
  , 0x1c, 0x00, 0x01, 0xf0, 0x38, 0x67, 0xff, 0x80
  , 0x1c, 0x00, 0x0c, 0x58, 0x18, 0x63, 0xc1, 0x80
  , 0x1c, 0x00, 0x00, 0x48, 0x18, 0x60, 0x31, 0x80
  , 0x1c, 0x00, 0x00, 0xc0, 0x1c, 0x61, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x0c, 0x61, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x0c, 0x7f, 0xff, 0x80
  , 0x1c, 0x07, 0xc0, 0x3f, 0x8c, 0x7f, 0xf1, 0x80
  , 0x1c, 0x07, 0xe0, 0x3f, 0xcc, 0x7f, 0x01, 0x80
  , 0x1c, 0x0f, 0xe0, 0x3f, 0xcc, 0x70, 0x01, 0x80
  , 0x1c, 0x0f, 0xe0, 0x7f, 0xec, 0x60, 0x01, 0x80
  , 0x1c, 0x0f, 0xe0, 0x7f, 0xcc, 0x60, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x0c, 0x60, 0x07, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x08, 0x60, 0xc7, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x08, 0x60, 0x03, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x08, 0x60, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x0c, 0x60, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x04, 0x78, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x06, 0x7f, 0x81, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x03, 0x62, 0x3f, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x01, 0xe2, 0x3f, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x00, 0xe2, 0x3f, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x00, 0x60, 0x03, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x00, 0x70, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x00, 0x78, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x00, 0x68, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x00, 0x6c, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x00, 0x6c, 0x03, 0x80
  , 0x1f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x80
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x0c, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

char b5f[704] {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  , 0x1f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x80
  , 0x1f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x80
  , 0x1f, 0xff, 0xf0, 0x00, 0x1f, 0xff, 0xf1, 0x80
  , 0x1f, 0xff, 0xc0, 0x00, 0x07, 0xff, 0x01, 0x80
  , 0x1f, 0xff, 0x80, 0x00, 0x03, 0xf0, 0x01, 0x80
  , 0x1c, 0x0f, 0x80, 0x00, 0x01, 0xe0, 0x01, 0x80
  , 0x1c, 0x0f, 0x00, 0x00, 0x00, 0xe0, 0x01, 0x80
  , 0x1c, 0x0f, 0x00, 0x00, 0x00, 0xe0, 0x07, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0xe0, 0xc7, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0x60, 0x03, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0x60, 0x01, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0x60, 0x01, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0x78, 0x01, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0x7f, 0x81, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0x3f, 0xff, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0x20, 0x03, 0x80
  , 0x1c, 0x0e, 0x00, 0x00, 0x00, 0x20, 0x01, 0x80
  , 0x1c, 0x0e, 0x03, 0xff, 0xe0, 0x20, 0x01, 0x80
  , 0x1c, 0x0e, 0x07, 0xff, 0xf0, 0x20, 0x01, 0x80
  , 0x1c, 0x0e, 0x07, 0xff, 0xf0, 0x20, 0x01, 0x80
  , 0x1c, 0x0f, 0x07, 0xff, 0xf0, 0x3f, 0xff, 0x80
  , 0x1c, 0x0f, 0x07, 0xff, 0xe0, 0x3f, 0xf3, 0x80
  , 0x1c, 0x0f, 0x81, 0xf0, 0x00, 0x3f, 0xf1, 0x80
  , 0x1c, 0x00, 0x18, 0xe0, 0x00, 0x3f, 0xf1, 0x80
  , 0x1f, 0xe0, 0xd6, 0xe0, 0x00, 0x60, 0x01, 0x80
  , 0x1f, 0xfc, 0xf8, 0xe0, 0x00, 0x60, 0x01, 0x80
  , 0x1f, 0xfe, 0x78, 0xe0, 0x00, 0x60, 0x01, 0x80
  , 0x1f, 0xff, 0x5e, 0xe0, 0x00, 0x60, 0x01, 0x80
  , 0x1d, 0xff, 0x31, 0xe0, 0x00, 0x60, 0x01, 0x80
  , 0x1c, 0xff, 0x83, 0xe0, 0x00, 0x7f, 0xff, 0x80
  , 0x1c, 0x7f, 0xfe, 0xe0, 0x00, 0xff, 0xff, 0x80
  , 0x1c, 0x1f, 0xff, 0xe0, 0x00, 0xe0, 0x03, 0x80
  , 0x1c, 0x00, 0xff, 0xe0, 0x01, 0xe0, 0x01, 0x80
  , 0x1c, 0x00, 0xff, 0xe0, 0x01, 0xe0, 0x01, 0x80
  , 0x1c, 0x00, 0xff, 0xf0, 0x03, 0xe0, 0x01, 0x80
  , 0x1c, 0x00, 0x7f, 0xf8, 0x07, 0xe0, 0x01, 0x80
  , 0x1c, 0x00, 0x77, 0xfe, 0x0f, 0xff, 0xff, 0x80
  , 0x1f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x80
  , 0x1f, 0xff, 0xff, 0xff, 0xdf, 0xe0, 0x01, 0x80
  , 0x1f, 0xff, 0xff, 0xff, 0xc3, 0xe0, 0x01, 0x80
  , 0x1f, 0xe3, 0x8f, 0x1f, 0xe1, 0xe0, 0x01, 0x80
  , 0x1f, 0xdf, 0x86, 0x0f, 0xe1, 0xe0, 0x01, 0x80
  , 0x1f, 0x8a, 0x66, 0x03, 0xe0, 0xe0, 0x03, 0x80
  , 0x1f, 0x07, 0x06, 0x3f, 0xf1, 0xe0, 0x07, 0x80
  , 0x1e, 0x00, 0x00, 0x7f, 0xff, 0xf8, 0x01, 0x80
  , 0x1e, 0x00, 0x00, 0x27, 0xff, 0xff, 0x41, 0x80
  , 0x1e, 0x00, 0x03, 0x21, 0xfc, 0x75, 0x41, 0x80
  , 0x1c, 0x00, 0x00, 0xf0, 0x78, 0x65, 0xb3, 0x80
  , 0x1c, 0x00, 0x01, 0xf0, 0x38, 0x67, 0xff, 0x80
  , 0x1c, 0x00, 0x0c, 0x58, 0x18, 0x63, 0xc1, 0x80
  , 0x1c, 0x00, 0x00, 0x48, 0x18, 0x60, 0x31, 0x80
  , 0x1c, 0x00, 0x00, 0xc0, 0x1c, 0x61, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x0c, 0x61, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x0c, 0x7f, 0xff, 0x80
  , 0x1c, 0x07, 0xc0, 0x3f, 0x8c, 0x7f, 0xf1, 0x80
  , 0x1c, 0x07, 0xe0, 0x3f, 0xcc, 0x7f, 0x01, 0x80
  , 0x1c, 0x0f, 0xe0, 0x3f, 0xcc, 0x70, 0x01, 0x80
  , 0x1c, 0x0f, 0xe0, 0x7f, 0xec, 0x60, 0x01, 0x80
  , 0x1c, 0x0f, 0xe0, 0x7f, 0xcc, 0x60, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x0c, 0x60, 0x07, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x08, 0x60, 0xc7, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x08, 0x60, 0x03, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x08, 0x60, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x0c, 0x60, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x04, 0x78, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x06, 0x7f, 0x81, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x03, 0x62, 0x3f, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x01, 0xe2, 0x3f, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x00, 0xe2, 0x3f, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x00, 0x60, 0x03, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x00, 0x70, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x00, 0x78, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x00, 0x68, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x00, 0x6c, 0x01, 0x80
  , 0x1c, 0x00, 0x00, 0x00, 0x00, 0x6c, 0x03, 0x80
  , 0x1f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x80
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x0c, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

void setup() {
  fisWriter.begin();
  fisWriter.reset();
}
long timex = 0;
void loop() {

  fisWriter.initFullScreen();
  fisWriter.sendStringFS(0, 4 * 8, 0x21, F("graphics"));
  fisWriter.sendStringFS(0, 5 * 8, 0x21, F("from"));
  fisWriter.sendStringFS(0, 6 * 8, 0x21, F("memory"));
  delay(1000);

  fisWriter.initFullScreen();
  timex = millis();
  fisWriter.GraphicFromArray(0, 0, 64, 88, b5f, 1);
  timex = millis() - timex;
  delay(1000);
  fisWriter.initFullScreen();
  fisWriter.sendStringFS(0, 3 * 8, 0x21, F("Rendering"));
  fisWriter.sendStringFS(0, 4 * 8, 0x21, F("timex: "));
  fisWriter.sendStringFS(0, 6 * 8, 0x21, (String)timex+"ms");
  delay(3000);

  fisWriter.initFullScreen();
  fisWriter.sendStringFS(0, 4 * 8, 0x21, F("Graphics"));
  fisWriter.sendStringFS(0, 5 * 8, 0x21, F("from"));
  fisWriter.sendStringFS(0, 6 * 8, 0x21, F("flash"));
  delay(1000);
  fisWriter.initFullScreen();
  timex = millis();
  fisWriter.GraphicFromArray(0, 0, 64, 88, b5f_P, 1);
  timex = millis() - timex;
  delay(1000);
  fisWriter.initFullScreen();
  fisWriter.sendStringFS(0, 3 * 8, 0x21, F("Rendering"));
  fisWriter.sendStringFS(0, 4 * 8, 0x21, F("timex: "));
  fisWriter.sendStringFS(0, 6 * 8, 0x21, (String)timex+"ms");
}
